# 任务三：无人机搜索模型

本模型旨在解决任务三“搜索”部分的要求，即利用任务一（定位）生成的坠毁概率分布，推荐设备的**初始部署点**和**搜索模式**，并确定找到无人机的**概率**作为时间和累积搜索结果的函数（即 **累积探测概率, CPD**）。

## 1. 核心模型与算法

文件 `Search.py` 中的 `SingleUnitDroneSearch` 类集成了概率模型、部署策略、搜索模式和探测概率计算。

### 1.1 初始部署点推荐

* **方法：** **概率加权部署** (`probability_based_deployment`)
* **原理：** 直接在**坠毁概率密度最高**的网格单元部署搜索设备。这是最优的初始部署点，因为它将搜索努力集中在目标最可能出现的区域。

### 1.2 搜索模式（路径规划）

模型实现了四种典型的无人机搜索模式，用于推荐搜索策略：

| 搜索模式 (函数名) | 描述 | 适用场景 |
| :--- | :--- | :--- |
| `spiral` (螺旋) | 从中心点向外螺旋式扩展，逐步增加搜索半径。 | 坠毁概率**集中**在中心，但存在一定**不确定性**的区域。 |
| `grid` (网格) | 在矩形区域内进行系统性的来回平行线搜索。 | 坠毁概率**分布均匀**，或需要对特定**广阔区域**进行彻底覆盖。 |
| `sector` (扇形) | 将搜索区域划分为扇区，并沿径向路径进行。 | 快速覆盖以**部署点为中心**的区域，适用于 RTH 等路径依赖型故障。 |
| `pso` (粒子群优化) | 通过粒子群算法（PSO）指导路径，集中在**实时高概率**区域。 | 坠毁概率分布**高度集中**，追求**最快**找到目标的效率。 |

## 2. 累积探测概率 (CPD) 模型

### 2.1 CPD 定义

CPD 是衡量搜索效率的关键指标，定义为：**在特定时间 $t$ 之前，通过累积搜索努力找到失联无人机的总概率。**

$$
CPD(t) = \sum_{i=1}^{N(t)} P(\text{目标位于第 } i \text{ 个搜索单元}) \times P(\text{在第 } i \text{ 个搜索单元内找到目标})
$$

### 2.2 模型计算 (`simulate_search` 函数)

1.  **时间分配：** 将总搜索时间平均分配给路径上的每一步 (网格单元)。
    * $T_{\text{step}} = (T_{\text{max}} - T_{\text{setup}}) / (\text{路径长度} - 1)$
2.  **搜索覆盖：** 定义一个**圆形搜索区域** (半径 $R$)，模拟搜索单元的有效覆盖范围。
3.  **概率累积：** 沿着选定的搜索路径 (`path`) 遍历。对于路径上的每一步 $(x, y)$：
    * 计算圆形覆盖区域内**所有未被搜索过**的网格单元的**总坠毁概率** $(\Delta P)$。
    * 将 $\Delta P$ 累加到 CPD 中。
    * 标记这些网格单元为“已搜索”，确保不会重复计算探测概率。
4.  **结果：** 输出 CPD 曲线，即 **探测概率** 作为 **时间** 的函数。

## 3. 可视化分析

可视化结果 (3x3 图) 综合展示了 **坠毁前策略** 对 **搜索效率** 的影响：

1.  **坠毁概率分布与搜索路径（左列）：**
    * 展示了任务一生成的不同策略（LAND, HOVER, RTH）下的坠毁热点。
    * 显示了模型推荐的初始**部署点**。
    * 直观比较了四种搜索模式（Grid, Spiral, Sector, PSO）的路径形状，以及它们如何覆盖高概率区域。

2.  **探测概率随时间变化 (CPD)（中列）：**
    * 这是任务三的核心输出，曲线的斜率代表了搜索效率。
    * **斜率越陡，达到高探测概率所需的时间越短。**
    * 曲线可以指导决策者选择在特定坠毁策略下**最快**找到目标的搜索模式。

3.  **综合搜索覆盖热力图（右列）：**
    * 显示了四种搜索模式在总搜索时间内综合覆盖区域的强度。
    * 深色区域表示被多次或持续搜索覆盖，有助于评估搜索的彻底性。

这些结果为 MRDC 提供了定量依据，以确定在不同故障场景下（LAND/HOVER/RTH）应采取的最佳**部署点**和**搜索模式**，从而最大限度地缩短救援时间。