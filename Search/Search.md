# 🚁 任务三：单单元无人机搜索模型与性能评估

本文档详细介绍了用于评估单单元无人机在搜索与救援（SAR）任务中性能的 Python 代码模型、核心算法原理，以及设备组合的参数设计依据。

## 🎯 核心目标

在已知无人机坠毁概率分布 $P(C)$ 的情况下，评估三种不同传感器/载荷组合（A, B, C）分别采用四种搜索路径策略（螺旋、网格、扇形、PSO）时的**累计探测概率 (CPD)**，并找出最优的组合策略。

---

## ⚙️ 模型与参数设计

### 1. 核心搜索模型：指数探测模型 (Exponential Detection Model)

代码采用搜索理论中经典的指数探测模型来计算**累计探测概率（CPD）**，该模型是评估搜索有效性的基础。

$$
\text{CPD}(t) = \sum_{i \in \text{Map}} P(C_i) \cdot P(D_i|t)
$$

其中，单个网格单元 $i$ 的探测概率 $P(D_i|N)$ 由以下公式给出：

$$
P(D_i|N) = 1 - e^{-k \cdot N}
$$

* $P(C_i)$：网格单元 $i$ 的坠毁概率（来自任务一的模拟）。
* $P(D_i|N)$：网格单元 $i$ 经过 $N$ 次独立搜索努力后的探测概率。
* $k$ 值 (`k_efficiency`)：**探测效率参数**，量化了传感器的性能和识别的可靠性。
* $N$: 网格单元 $i$ 被有效搜索覆盖的次数。

---

### 2. 核心参数量化与设备组合合理性

本模型通过两个关键参数 **有效搜索宽度 $W$** 和 **探测效率 $k$** 来量化不同传感器组合的性能差异。

#### 2.1. 设备组合选取依据

任务三的设备组合设计基于任务二 **TOPSIS 综合评估排名**靠前的几款核心设备所携带的传感器，旨在评估最优硬件在搜索任务中的实际性能：

1.  **Rotary-Wing (旋翼无人机)**：排名第 1，提供高机动性平台。
2.  **Thermal UAV (热成像无人机)**：排名第 2，提供广域搜索能力。
3.  **Zoom Cam (变焦相机)**：排名第 3，提供高精度识别能力。

因此，我们设计了以下三种设备组合：

| 组合 | 传感器 | 搭载平台 | 搜索特性定位 |
| :--- | :--- | :--- | :--- |
| **A** | 热成像 | Thermal UAV | 高效率广域搜索 |
| **B** | 变焦相机 | Zoom Cam + Rotary-Wing | 高精度热点搜索 |
| **C** | 热成像 + 变焦相机 | Rotary-Wing | 全能型均衡搜索 |

#### 2.2. 有效搜索宽度 $W$ (Sweep Width)

* **物理意义与量化：** $W$ 是搜索理论中用于量化**搜索几何效率**的核心参数。文献 \[3] 强调了精确计算和修正 $W$ 值对于准确评估**搜索覆盖面积**的重要性。在我们的模型中，$W$ (即 `coverage_width`) 代表了不同传感器组合在相同高度下的**有效扫描范围**，决定了搜索的**广度**。

| 组合 | 传感器 | $W$ 值 | 物理特性与 $W$ 值设定 |
| :--- | :--- | :--- | :--- |
| **A** | 热成像 (广域) | **45.0** (最大) | 热成像的**大视场角 (FOV)** 赋予其最大的 $W$，适用于快速广域覆盖。|
| **B** | 变焦相机 (高精) | **20.0** (最小) | 高精度变焦操作时需要收窄 FOV，其 $W$ 值最小，搜索广度受限。 |
| **C** | 热成像 + 变焦 (融合) | **35.0** (中等) | 融合系统在 $W$ 上取两者平衡，既保证一定广度，也预留了处理融合数据的计算资源。 |

#### 2.3. 探测效率 $k$ (Detection Efficiency)

* **物理意义与论证：** $k$ 值量化了传感器在一次搜索中成功识别目标的**可靠性/准确性**。文献 \[2] 通过对比可见光和热红外传感器在动态环境下的性能，指出**多传感器融合**是提高识别准确性的关键。
* **代码关联：** 我们根据文献 \[2] 的结论设定 $k$ 值：融合系统（组合 C）通过结合两种模态的数据来消除虚警（如热源假目标），从而达到了最高的识别准确性，故赋予**最高的 $k$ 值**。

| 组合 | 传感器 | $k$ 值 | 文献 \[2] 支撑的可靠性分析 |
| :--- | :--- | :--- | :--- |
| **A** | 热成像 (广域) | **0.35** (中高) | 易受环境热噪声影响，可靠性（$k$ 值）低于融合系统。|
| **B** | 变焦相机 (高精) | **0.25** (中低) | 识别依赖光照和操作员目视，可靠性（$k$ 值）最低。 |
| **C** | 热成像 + 变焦 (融合) | **0.45** (最高) | 基于文献 \[2] 强调的多传感器融合优势，系统识别准确性最高，**$k$ 值最高**。 |

---

## 💡 核心算法原理

### 1. 初始部署点确定 (最大概率部署)

* **算法：** `probability_based_deployment`
* **决策：** 采用**最大后验概率（MAP）原则**，将初始部署点 $P_{\text{start}}$ 设定为坠毁概率分布图 $P(C)$ 中的**全局最大值点**（热点中心）。
    $$
    P_{\text{start}} = \arg\max_{(x, y)} P(C_{x, y})
    $$
* **理论依据 [1]：** 此策略基于时间敏感型搜索与救援的实证研究。根据 Wang 等人的研究 [1]，在采用深度强化学习进行时效性搜索任务时，**强制约束无人机从目标热点中心开始搜索**的策略，能大幅缩短搜索时间。该研究的实验量化结果表明，**若去掉“热点中心”的首步约束，搜索效率显著下降**。因此，将初始部署点设置在 $P(C)$ 最大处，是最小化定位时间（TTF）的最有效、最经济的初始配置。

### 2. 贝叶斯递归更新（PSO 优化）

为了实现路径的动态自适应性，**PSO 算法**采用**递归贝叶斯估计** \[4] 框架，在搜索过程中不断更新目标位置的概率信念。

#### 2.1. 核心思想 (后验作为先验)

无人机在执行完一个搜索段（路径 $k-1$）后，会根据“未发现目标”这一观测结果 $Z_{k}$ 来修正其对目标位置的信念 $P(C|Z_{1:k})$。这种修正构成了**递归**过程：

$$
P(C|Z_{1:k}) = \frac{P(Z_k|C) \cdot P(C|Z_{1:k-1})}{P(Z_k|Z_{1:k-1})}
$$

* $P(C|Z_{1:k-1})$：**上一搜索段的后验概率**，作为当前段的**先验指导图** (`pso_guidance_map`)。
* $P(Z_k|C)$：**似然函数**，即在已知目标位置 $C$ 的情况下，搜索 $k$ 段时间后仍未发现目标的概率。
* $P(C|Z_{1:k})$：**当前搜索段的后验概率**，用于规划下一段的 PSO 路径。

#### 2.2. 似然函数 $P(Z_k|C)$ 的计算

对于目标位置 $C_i$（网格单元 $i$），在 $N$ 次累计搜索努力下仍未发现目标 ($Z_k=NF$) 的概率为：

$$
P(NF|C_i, N) = 1 - P(D_i|N) = e^{-k \cdot N}
$$

贝叶斯更新过程将**全局搜索努力**（$N$ 的累积）代入该公式，并结合原始先验 $P(C)$，得到新的后验概率图，以**指导 PSO 路径远离已深度搜索的低概率区域**，转而探索**新发现的高概率区域**。



### 3. 四种搜索路径算法

所有路径均从最优部署点开始，并被插值和平滑连接，以模拟真实的无人机飞行：

| 算法 | 路径函数 | 描述 | 适用场景 |
| :--- | :--- | :--- | :--- |
| **螺旋** | `spiral_search_path` | 从中心向外扩散，保证中心区域的精细覆盖。 | 热点区域已锁定，适用于高确定性、集中式搜索。 |
| **网格** | `grid_search_path` | 有序的条带式往复飞行，保证区域的系统性覆盖。 | 适用于大面积、低确定性、地形平坦的区域。 |
| **扇形** | `sector_search_path` | 从中心向外辐射，以不同的角度交替搜索。 | 适用于中心可见、需要快速向外延伸、且在短时间内覆盖广阔扇区。 |
| **PSO** | `pso_search_path` | 基于粒子群优化算法，路径集中在**贝叶斯递归更新后**概率梯度最高的区域。 | 适用于复杂概率分布，路径动态适应高价值区域。 |

---

## 📊 结果评估与可视化

代码通过 `run_all_combinations_and_algorithms` 函数运行所有 12 种场景，并计算以下性能指标：

1.  **CPD-时间曲线：** 累计探测概率随时间的变化。
2.  **TTF (Time to Find)：** 达到 50%、75%、90% 探测概率所需的时间。
3.  **搜索效率曲线：** CPD 相对于**累计搜索权重**（被 $W$ 覆盖的概率总和）的曲线，接近 $y=x$ 代表高效率。

最终结果以 **3 行（设备组合）$\times$ 4 列（分析维度）** 的图表形式展示，提供了综合性能的直观对比。

---

## 📜 参考文献

[1] Wang, T., Diao, M., Chen, W., & Chen, J. (2024). **Deep Reinforcement Learning for Time-Critical Wilderness Search and Rescue Using Drones**. *IEEE Transactions on Intelligent Transportation Systems*, 25(4), 5723–5736.

[2] Li, R., Yang, S., & Li, Y. (2020). **Selection of a Visible-Light vs. Thermal Infrared Sensor in Dynamic Environments Based on Confidence Measures**. *Sensors*, 20(2), 481. DOI: 10.3390/s20020481.

[3] Koester, L. J., & Syrotuck, W. (2020). **New sweep widths values, correction factors, models, and detection**. *Journal of Search and Rescue*, 4(7).

[4] Furukawa, T., Bourgault, F., Lavis, B., & Durrant-Whyte, H. F. (2006). **Recursive Bayesian Search-and-Tracking Using Coordinated UAVs for Lost Targets**. *Proceedings of the 2006 IEEE International Conference on Robotics and Automation*.